// Generated by .NET Reflector from C:\Program Files\Default Company Name\Selenium Test Tool\MoBankUI.exe
namespace MoBankUI
{
    using OpenQA.Selenium;
    using OpenQA.Selenium.Support.UI;
    using Selenium;
    using System;
    using System.Threading;
    
    internal class UserData_TPS
    {
        private MoBankUI.Screenshot screenshot = new MoBankUI.Screenshot();
        
        public void userdata_TPS(IWebDriver driver, ISelenium selenium, datarow_TPS datarow)
        {
            string str5;
            try
            {
                driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10.0));
                IWebElement element = driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/fieldset/div[2]/div/button"));
                decimal xpathCount = selenium.GetXpathCount("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div");
                if (xpathCount == 0M)
                {
                    datarow.newrowTPS("User Data Form Details", "Expected User Form Fields", "User Form Fields Doesnot Exist", "FAIL", driver, selenium);
                }
                for (int i = 1; i <= xpathCount; i++)
                {
                    if (selenium.IsElementPresent("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[" + i + "]/label"))
                    {
                        string actual = driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[" + i + "]/label")).Text;
                        if (!actual.Contains("Country"))
                        {
                            driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[" + i + "]/input[2]")).Clear();
                            driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[" + i + "]/input[2]")).SendKeys("TEST");
                            datarow.newrowTPS("Form Field", "", actual, "PASS", driver, selenium);
                        }
                        if (actual.Contains("Country"))
                        {
                            try
                            {
                                int num3 = i - 1;
                                string str2 = "id=FormData_" + num3 + "__Value";
                                string[] selectOptions = selenium.GetSelectOptions("id=FormData_" + num3 + "__Value");
                                string str3 = null;
                                foreach (string str4 in selectOptions)
                                {
                                    if (!str4.Contains("Please"))
                                    {
                                        if (str4 == "United Kingdom")
                                        {
                                            str3 = str3 + "\r\n" + str4;
                                            new SelectElement(driver.FindElement(By.Id("FormData_" + num3 + "__Value"))).SelectByText(str4);
                                            break;
                                        }
                                        str3 = str3 + "\r\n" + str4;
                                        new SelectElement(driver.FindElement(By.Id("FormData_" + num3 + "__Value"))).SelectByText(str4);
                                    }
                                }
                                datarow.newrowTPS("Country Field", "", str3, "PASS", driver, selenium);
                            }
                            catch (Exception exception1)
                            {
                                Exception exception = exception1;
                                str5 = exception.ToString();
                                datarow.newrowTPS("Country Field Exception", "Exception Not Expected", str5, "PASS", driver, selenium);
                            }
                        }
                        if (actual.Contains("Email"))
                        {
                            try
                            {
                                driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[" + i + "]/input[2]")).Clear();
                                driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[" + i + "]/input[2]")).SendKeys("test@test.com");
                            }
                            catch (Exception exception2)
                            {
                                str5 = exception2.ToString();
                                datarow.newrowTPS("Email Field Exception", "Exception Not Expected", str5, "FAIL", driver, selenium);
                                this.screenshot.screenshotfailed(driver, selenium);
                            }
                        }
                    }
                }
            }
            catch (Exception exception3)
            {
                str5 = exception3.ToString();
                datarow.newrowTPS("Exception in DataForm", "Exception Not Expected", str5, "FAIL", driver, selenium);
                this.screenshot.screenshotfailed(driver, selenium);
            }
            try
            {
                if (selenium.IsElementPresent("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[11]/fieldset/div[2]/div/label/span/span[2]"))
                {
                    driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/section/div[11]/fieldset/div[2]/div/label/span/span[2]")).Click();
                }
                driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10.0));
                IWebElement element2 = driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/fieldset/div[2]/div/button"));
                driver.FindElement(By.XPath("//body[@id='page-checkout-process']/div/div[2]/div/form/fieldset/div[2]/div/button")).Click();
                selenium.WaitForPageToLoad("30000");
                string str6 = driver.Title.ToString();
                string str7 = driver.FindElement(By.Id("BasketInfo")).Text;
                if (selenium.IsElementPresent("id=FormData_2__Value"))
                {
                    driver.FindElement(By.Id("FormData_2__Value")).Click();
                }
                if (selenium.IsElementPresent("//html/body/div/div[2]/div/form/fieldset/div[2]/div/button"))
                {
                    driver.FindElement(By.XPath("//html/body/div/div[2]/div/form/fieldset/div[2]/div/button")).Click();
                    selenium.WaitForPageToLoad("30000");
                    Thread.Sleep(0x7d0);
                }
                string text = selenium.GetText("css=div.ui-content.ui-body-c > p");
                if (selenium.IsElementPresent("//html/body/div/div[2]/div[2]/div[2]/a/span/span"))
                {
                    driver.FindElement(By.XPath("//html/body/div/div[2]/div[2]/div[2]/a/span/span")).Click();
                    selenium.WaitForPageToLoad("30000");
                }
            }
            catch (Exception exception4)
            {
                str5 = exception4.ToString();
                datarow.newrowTPS("Exception in DataForm", "Exception Not Expected", str5, "FAIL", driver, selenium);
                this.screenshot.screenshotfailed(driver, selenium);
            }
        }
    }
}
